<!DOCTYPE html>
<html  dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon.png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.26.4/css/uikit.gradient.css">

        <link rel="stylesheet" href="style.css">
        <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
        <script src="uikit.js"></script>
        <script src="scripts.js"></script>
        <script src="jquery.sticky-kit.js"></script>

        <meta name="generator" content="pandoc-uikit" />
                        <title>doc</title>
        <style type="text/css">code{white-space: pre;}</style>
                        <style type="text/css">
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
        </style>
                                               
    </head>

    <body>


        <div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">

            
            <div class="uk-grid" data-uk-grid-margin >          
                <div class="uk-width-medium-1-4">
                    <div class="uk-overflow-container" data-uk-sticky="{top:25,media: 768}">
                        <div class="uk-panel uk-panel-box menu-begin" >

                            
                        </div>
                    </div>
                </div>

                <div class="uk-width-medium-3-4">
<h1 id="positionoverrideexam">PositionOverrideExam</h1>
<h2 id="notification-before-use">Notification before use</h2>
<p>Depending on the type of product you are using, the definitions of ‘Parameter’, ‘IO Logic’, ‘AxisStatus’, etc. may be different. This example is based on ‘Ezi-SERVO’, so please apply the appropriate value depending on the product you are using.</p>
<pre><code>Example)

FM_EZISERVO_PARAM           // Parameter enum when using &#39;Ezi-SERVO&#39;    
FM_EZIMOTIONLINK_PARAM      // Parameter enum when using &#39;Ezi-MOTIONLINK&#39;</code></pre>
<h2 id="program-scenario">0. Program scenario</h2>
<p>[EN]<br />
1. Connect a device. 2. Check the drive error. 3. Enable Servo. 4. Operate the motor with relative position, and when it reaches a specific point, change the existing target position and drive the motor. 5. Operate the motor with absolute position, and when it reaches a specific point, change the existing target position and drive the motor. 6. Close connection.</p>
<p>[KR]<br />
1. 장치 연결. 2. 드라이브 에러 체크. 3. Servo Enable. 4. 상대 위치 이동 운전으로 모터를 구동시키며 사용자가 지정한 특정 지점에 도달하게 된다면 기존의 목표위치를 변경하여 모터를 구동시킵니다. 5. 절대 위치 이동 운전으로 모터를 구동시키며 사용자가 지정한 특정 지점에 도달하게 된다면 기존의 목표위치를 변경하여 모터를 구동시킵니다. 6. 연결 해제.</p>
<h2 id="check-drive-error">1. Check drive error</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">// Check Drive&#39;s Error</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>EZISERVO_AXISSTATUS AxisStatus;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="cf">if</span> (FAS_GetAxisStatus(nPortID, iSlaveNo, &amp;(AxisStatus.dwValue)) != FMM_OK)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>{</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_GetAxisStatus) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="cf">if</span> (AxisStatus.FFLAG_ERRORALL)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>{</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>    <span class="co">// if Drive&#39;s Error was detected, Reset the ServoAlarm</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>    <span class="cf">if</span> (FAS_ServoAlarmReset(nPortID, iSlaveNo) != FMM_OK)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>    {</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>        printf(<span class="st">&quot;Function(FAS_ServoAlarmReset) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a>    }</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
You can check the current drive’s operating status using the FAS_GetAxisStatus() function. You can reset the current drive’s alarm status using the FAS_ServoAlarmReset() function.</p>
<p>[KR]<br />
FAS_GetAxisStatus() 함수를 사용하여 현재 드라이브의 운전 상태를 확인 할 수 있습니다. FAS_ServoAlarmReset() 함수를 사용하여 현재 드라이브의 알람상태를 리셋 할 수 있습니다.</p>
<h3 id="axis-status">1.1 Axis status</h3>
<p>[EN]<br />
EZISERVO_AXISSTATUS is a structure that organizes drive status values. It can be checked in the header file (MOTION_EziSERVO_DEFINE.h).</p>
<p>[KR]<br />
EZISERVO_AXISSTATUS 는 드라이브 상태값이 정리된 구조체이며 헤더파일 (MOTION_EziSERVO_DEFINE.h)에서 확인하실 수 있습니다.</p>
<h2 id="servo-enable">2. Servo Enable</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="cf">if</span> (FAS_ServoEnable(nPortID, iSlaveNo, <span class="dv">1</span>) != FMM_OK)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>{</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_ServoEnable) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
You can set the Servo Enable signal of the drive using the FAS_ServoEnable() function.</p>
<p>[KR]<br />
FAS_ServoEnable() 함수를 사용하여 드라이브의 Servo Enable 신호를 설정할 수 있습니다.</p>
<h2 id="get-actual-position">3. Get actual position</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="dt">int</span> lActualPos = <span class="dv">0</span>;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="cf">if</span> (FAS_GetActualPos(nPortID, iSlaveNo, &amp;lActualPos) != FMM_OK)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>{</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_GetActualPos) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
You can check the current absolute position of the motor using the FAS_GetActualPos() function.</p>
<p>[KR]<br />
FAS_GetActualPos() 함수를 사용하여 현재 모터의 절대위치값을 파악할 수 있습니다.</p>
<h2 id="position-increase-override">4. Position increase override</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="dt">int</span> lChangePos = <span class="dv">0</span>;</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="dt">int</span> lIncPos = INCPOS;</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>lChangePos += lIncPos;</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="cf">if</span> (FAS_PositionIncOverride(nPortID, iSlaveNo, lChangePos) != FMM_OK)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>{</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_PositionIncOverride) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
The FAS_PositionIncOverride() function can be used to change the relative target position value during operation.</p>
<p>[KR]<br />
FAS_PositionIncOverride() 함수를 사용하여 모터에 이미 설정된 상대 이동 위치값을 변경하는데 사용할 수 있습니다.</p>
<h2 id="position-absolute-override">5. Position absolute override</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="dt">int</span> lChangePos = ABSPOS;</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="cf">if</span> (FAS_PositionAbsOverride(nPortID, iSlaveNo, lChangePos) != FMM_OK)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>{</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_PositionAbsOverride) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
The FAS_PositionAbsOverride() function can be used to change the absolute target position value during operation.</p>
<p>[KR]<br />
FAS_PositionAbsOverride() 함수를 사용하여 모터에 이미 설정된 절대 이동 위치값을 변경하는데 사용할 수 있습니다.</p>
<h2 id="watch-drive-status">6. Watch drive status</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>EZISERVO_AXISSTATUS AxisStatus;</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="cf">do</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>{</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>    usleep(<span class="dv">1</span> * <span class="dv">1000</span>);</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a>    <span class="cf">if</span> (FAS_GetAxisStatus(nPortID, iSlaveNo, &amp;(AxisStatus.dwValue)) != FMM_OK)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a>    {</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a>        printf(<span class="st">&quot;Function(FAS_GetAxisStatus) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a>        <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a>    }</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true"></a>} <span class="cf">while</span> (AxisStatus.FFLAG_MOTIONING || !(AxisStatus.FFLAG_INPOSITION));</span></code></pre></div>
<p>[EN]<br />
The FAS_GetAxisStatus() function indicates the drive status value. The user can use it to check the status and wait until a specific status value is confirmed. In addition, the user can check whether the motor operation is completed with the values ​​FFLAG_MOTIONING (‘0’) and FFLAG_INPOSITION (‘1’).</p>
<p>[KR]<br />
드라이브의 운전 상태값을 나타내는 FAS_GetAxisStatus() 함수를 사용하여 사용자가 원하는 특정상태 값이 확인 될 때까지 대기할 수 있습니다. 더하여 모터의 동작 후 정지완료 상태는 FFLAG_MOTIONING (‘0’) 및 FFLAG_INPOSITION(‘1’) 값으로 확인 할 수 있습니다.</p>
<h3 id="axis-status-1">6.1 Axis status</h3>
<p>[EN]<br />
EZISERVO_AXISSTATUS is a structure that organizes the drive status values ​​and can be checked in the header file (MOTION_EziSERVO_DEFINE.h). In addition, the motor’s stop completion status after operation can be checked with the values ​​FFLAG_MOTIONING (‘0’) and FFLAG_INPOSITION (‘1’).</p>
<p>[KR]<br />
EZISERVO_AXISSTATUS 는 드라이브 상태값이 정리된 구조체이며 헤더파일 (MOTION_EziSERVO_DEFINE.h)에서 확인하실 수 있습니다. 더하여 모터의 동작 후 정지완료 상태는 FFLAG_MOTIONING (‘0’) 및 FFLAG_INPOSITION(‘1’) 값으로 확인 할 수 있습니다.</p>
<h2 id="etc">7. Etc</h2>
<p>[EN]<br />
1. For function descriptions on connecting and disconnecting devices, please refer to the [01.ConnectionExam] project document. 2. For function descriptions on relative and absolute position movement, please refer to the [08.MoveAbsIncPosExExam] project document.</p>
<p>[KR]<br />
1. 장치 연결 및 해제에 대한 함수 설명은 [01.ConnectionExam] 프로젝트 문서를 참고하시기 바랍니다. 2. 상대 위치 이동 및 절대 위치 이동에 대한 함수 설명 [08.MoveAbsIncPosExExam] 프로젝트 문서를 참고하시기 바랍니다.</p>                    
                </div>
            </div>

            <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>
        </div>
    </body>
</html>
