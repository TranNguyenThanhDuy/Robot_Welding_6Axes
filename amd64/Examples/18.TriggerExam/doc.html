<!DOCTYPE html>
<html  dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon.png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.26.4/css/uikit.gradient.css">

        <link rel="stylesheet" href="style.css">
        <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
        <script src="uikit.js"></script>
        <script src="scripts.js"></script>
        <script src="jquery.sticky-kit.js"></script>

        <meta name="generator" content="pandoc-uikit" />
                        <title>doc</title>
        <style type="text/css">code{white-space: pre;}</style>
                        <style type="text/css">
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
        </style>
                                               
    </head>

    <body>


        <div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">

            
            <div class="uk-grid" data-uk-grid-margin >          
                <div class="uk-width-medium-1-4">
                    <div class="uk-overflow-container" data-uk-sticky="{top:25,media: 768}">
                        <div class="uk-panel uk-panel-box menu-begin" >

                            
                        </div>
                    </div>
                </div>

                <div class="uk-width-medium-3-4">
<h1 id="triggerexam">TriggerExam</h1>
<h2 id="notification-before-use">Notification before use</h2>
<p>Depending on the type of product you are using, the definitions of ‘Parameter’, ‘IO Logic’, ‘AxisStatus’, etc. may be different. This example is based on ‘Ezi-SERVO’, so please apply the appropriate value depending on the product you are using.</p>
<pre><code>Example)

FM_EZISERVO_PARAM           // Parameter enum when using &#39;Ezi-SERVO&#39;    
FM_EZIMOTIONLINK_PARAM      // Parameter enum when using &#39;Ezi-MOTIONLINK&#39;</code></pre>
<h2 id="program-scenario">0. Program scenario</h2>
<p>[EN]<br />
1. Connect a device. 2. Configure the trigger. 3. Run the trigger. 4. Monitor trigger count. 5. Close connection.</p>
<p>[KR]<br />
1. 장치 연결. 2. Trigger 설정. 3. Trigger 시작. 4. Trigget 횟수 감지. 5. 연결 해제.</p>
<h2 id="set-trigger">1. Set Trigger</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>TRIGGER_INFO Trg_Info = {<span class="dv">0</span>};</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> cOutputNo;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="co">// Set Trigger value.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>cOutputNo = <span class="dv">0</span>;          <span class="co">// Output pin #0</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>Trg_Info.wCount = <span class="dv">20</span>;   <span class="co">// Set the number of Trigger outputs</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>Trg_Info.wOnTime = <span class="dv">250</span>; <span class="co">// On Time Setting : 250 [ms]</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>Trg_Info.wPeriod = <span class="dv">500</span>; <span class="co">// Set Trigger period : 500 [ms]</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="cf">if</span> (FAS_SetTrigger(nPortID, iSlaveNo, cOutputNo, &amp;Trg_Info) != FMM_OK)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>{</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_SetTrigger) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
You can configure the Trigger using the FAS_SetTrigger() function.</p>
<p>[KR]<br />
FAS_SetTrigger() 함수를 사용하여 Trigger에 대한 설정을 할 수 있습니다.</p>
<h3 id="trigger_info">1.1 TRIGGER_INFO</h3>
<p>[EN]<br />
TRIGGER_INFO is a structure that contains information about the Trigger settings.</p>
<p>The meaning of each member variable of TRIGGER_INFO is as follows. wCount is the number of times the Trigger is output. wOnTime is the length of Trigger On in millisecond. wPeriod is the period of Trigger On in millisecond. The above source code turns the Trigger On 20 times for 250ms with a cycle of 500ms.</p>
<p>TRIGGER_INFO is declared in ‘MOTION_DEFINE.h’.</p>
<p>[KR]<br />
TRIGGER_INFO는 Trigger 설정에 대한 정보를 담은 구조체입니다.</p>
<p>TRIGGER_INFO의 각 멤버 변수는 다음을 의미합니다. wCount는 Trigger 출력 횟수 wOnTime은 Trigger On 시간 설정 wPeriod은 Trigger On 주기 위 소스 코드는 500ms 주기로 250ms동안 20회 Trigger가 On이 됩니다.</p>
<p>TRIGGER_INFO는 MOTION_DEFINE.h에 선언되어 있습니다.</p>
<h3 id="bitmask-logic-of-fastech-io-product">1.2 Bitmask logic of Fastech IO product</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>0x0001</th>
<th>0x0002</th>
<th>0x0004</th>
<th>0x0008</th>
<th>0x0010</th>
<th>0x0020</th>
<th>0x0040</th>
<th>0x0080</th>
<th>0x0100</th>
<th>0x0200</th>
<th>0x0400</th>
<th>0x0800</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ezi-IO-I16</td>
<td>IN0</td>
<td>IN1</td>
<td>IN2</td>
<td>IN3</td>
<td>IN4</td>
<td>IN5</td>
<td>IN6</td>
<td>IN7</td>
<td>IN8</td>
<td>IN9</td>
<td>IN10</td>
<td>IN11</td>
<td>…</td>
</tr>
<tr class="even">
<td>Ezi-IO-O16</td>
<td>OUT0</td>
<td>OUT1</td>
<td>OUT2</td>
<td>OUT3</td>
<td>OUT4</td>
<td>OUT5</td>
<td>OUT6</td>
<td>OUT7</td>
<td>OUT8</td>
<td>OUT9</td>
<td>OUT10</td>
<td>OUT11</td>
<td>…</td>
</tr>
<tr class="odd">
<td>Ezi-IO-I8O8</td>
<td>IN0</td>
<td>IN1</td>
<td>IN2</td>
<td>IN3</td>
<td>IN4</td>
<td>IN5</td>
<td>IN6</td>
<td>IN7</td>
<td>OUT0</td>
<td>OUT1</td>
<td>OUT2</td>
<td>OUT3</td>
<td>…</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th></th>
<th>0x0001</th>
<th>0x0002</th>
<th>0x0004</th>
<th>0x0008</th>
<th>…</th>
<th>0x10000</th>
<th>0x20000</th>
<th>0x40000</th>
<th>0x80000</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ezi-IO-I32</td>
<td>IN0</td>
<td>IN1</td>
<td>IN2</td>
<td>IN3</td>
<td>…</td>
<td>IN16</td>
<td>IN17</td>
<td>IN18</td>
<td>…</td>
<td></td>
</tr>
<tr class="even">
<td>Ezi-IO-O32</td>
<td>OUT0</td>
<td>OUT1</td>
<td>OUT2</td>
<td>OUT3</td>
<td>…</td>
<td>OUT16</td>
<td>OUT17</td>
<td>OUT18</td>
<td>…</td>
<td></td>
</tr>
<tr class="odd">
<td>Ezi-IO-I16O16</td>
<td>IN0</td>
<td>IN1</td>
<td>IN2</td>
<td>IN3</td>
<td>…</td>
<td>OUT0</td>
<td>OUT1</td>
<td>OUT2</td>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="run-trigger">2. Run trigger</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> uRunMask;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> uStopMask;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="co">// Run Output</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>uRunMask = (<span class="bn">0x01</span> &lt;&lt; cOutputNo); <span class="co">// Run Output Pin #0</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>uStopMask = <span class="bn">0x00000000</span>;</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="cf">if</span> (FAS_SetRunStop(nPortID, iSlaveNo, uRunMask, uStopMask) != FMM_OK)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>{</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>    printf(<span class="st">&quot;Function(FAS_SetRunStop) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>    <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>[EN]<br />
You can use the FAS_SetRunStop() function to Run/Stop the Trigger. Trigger run requests are written sequentially from LSB to MSB of uRunMask. For example, trigger run request 0 is written in the LSB, and trigger run request 31 is written in the MSB. Trigger stop requests are written sequentially from LSB to MSB of uStopMask. For example, trigger stop request 0 is written in the LSB, and trigger stop request 31 is written in the MSB.</p>
<p>[KR]<br />
FAS_SetRunStop() 함수를 사용하여 Trigger를 Run/Stop 시킬 수 있습니다. uRunMask의 LSB에 0번 Trigger Run 요청부터 MSB에 31번 Trigger Run 요청이 순차적으로 쓰여집니다. uStopMask의 LSB에 0번 Trigger Stop 요청부터 MSB에 31번 Trigger Stop 요청이 순차적으로 쓰여집니다.</p>
<h2 id="monitor-trigger-count">3. Monitor trigger count</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> cOutputNo = <span class="dv">0</span>;            <span class="co">// Output pin #0</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> uCount = <span class="dv">0</span>;</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="cf">do</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>{</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    usleep(<span class="dv">100</span> * <span class="dv">1000</span>);</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    <span class="cf">if</span> (FAS_GetTriggerCount(nPortID, iSlaveNo, cOutputNo, &amp;uCount) != FMM_OK)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    {</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>        printf(<span class="st">&quot;Function(FAS_GetTriggerCount) was failed.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>        <span class="cf">return</span> <span class="kw">false</span>;</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>    }</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>    {</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>        printf(<span class="st">&quot;Get Trigger [</span><span class="sc">%d</span><span class="st">] count </span><span class="sc">\n</span><span class="st">&quot;</span>, uCount);</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>    }</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>} <span class="cf">while</span> (uCount &lt; Trg_Info.wCount);</span></code></pre></div>
<p>[EN]<br />
You can check how many times trigger occurred for a specific Output Pin using the FAS_GetTriggerCount() function.</p>
<p>[KR]<br />
FAS_GetTriggerCount() 함수를 통하여 특정 Output Pin의 Trigger 발생 횟수를 읽어올 수 있습니다.</p>
<h2 id="etc">4. Etc</h2>
<p>[EN]<br />
1. Please refer to the [01.ConnectionExam] project document for function descriptions on connecting and disconnecting devices.</p>
<p>[KR]<br />
1. 장치 연결 및 해제에 대한 함수 설명은 [01.ConnectionExam] 프로젝트 문서를 참고하시기 바랍니다.</p>                    
                </div>
            </div>

            <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>
        </div>
    </body>
</html>
